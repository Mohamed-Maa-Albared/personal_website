{% extends "base.html" %}

{% block title %}Contact - My Portfolio{% endblock %}

{% block content %}
<section class="contact-section">
    <div class="container">
        <h1>Get In Touch</h1>
        <p class="subtitle">I'd love to hear from you! Feel free to reach out.</p>

        <form id="contactForm" class="contact-form" method="POST">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="subject">Subject</label>
                <input type="text" id="subject" name="subject" required>
            </div>

            <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="6" required></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Send Message</button>
            <div id="formMessage" class="form-message"></div>
        </form>
    </div>
</section>

<script>
    document.getElementById('contactForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            subject: formData.get('subject'),
            message: formData.get('message')
        };

        fetch('/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                const messageDiv = document.getElementById('formMessage');
                if (data.success) {
                    messageDiv.textContent = data.message;
                    messageDiv.className = 'form-message success';
                    document.getElementById('contactForm').reset();
                } else {
                    messageDiv.textContent = data.message;
                    messageDiv.className = 'form-message error';
                }
            })
            .catch(error => {
                document.getElementById('formMessage').textContent = 'Error sending message';
                document.getElementById('formMessage').className = 'form-message error';
            });
    });
</script>
{% endblock %}