{% extends "base.html" %}

{% block title %}{{ post.title }} â€” Mohamed Maa Albared{% endblock %}
{% block meta_description %}{{ post.excerpt[:160] }}{% endblock %}
{% block meta_keywords %}{{ post.tags }}, Mohamed Maa Albared, Data Science, AI{% endblock %}
{% block canonical_url %}{{ url_for('main.blog_detail', slug=post.slug, _external=True) }}{% endblock %}
{% block og_title %}{{ post.title }}{% endblock %}
{% block og_description %}{{ post.excerpt }}{% endblock %}
{% block og_type %}article{% endblock %}
{% block og_url %}{{ url_for('main.blog_detail', slug=post.slug, _external=True) }}{% endblock %}
{% if post.cover_image %}{% block og_image %}{{ post.cover_image }}{% endblock %}{% endif %}
{% block twitter_title %}{{ post.title }}{% endblock %}
{% block twitter_description %}{{ post.excerpt }}{% endblock %}
{% if post.cover_image %}{% block twitter_image %}{{ post.cover_image }}{% endblock %}{% endif %}

{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ post.title }}",
  "description": "{{ post.excerpt[:200] }}",
  "author": {
    "@type": "Person",
    "name": "Mohamed Maa Albared",
    "url": "{{ url_for('main.index', _external=True) }}"
  },
  "publisher": {
    "@type": "Person",
    "name": "Mohamed Maa Albared",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ url_for('static', filename='images/logo.png', _external=True) }}"
    }
  },
  "datePublished": "{{ post.created_at.strftime('%Y-%m-%dT%H:%M:%S+00:00') }}",
  {% if post.updated_at %}"dateModified": "{{ post.updated_at.strftime('%Y-%m-%dT%H:%M:%S+00:00') }}",{% endif %}
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ url_for('main.blog_detail', slug=post.slug, _external=True) }}"
  },
  {% if post.cover_image %}"image": "{{ post.cover_image }}",{% endif %}
  "articleSection": "{{ post.category }}",
  "inLanguage": "en-US",
  "url": "{{ url_for('main.blog_detail', slug=post.slug, _external=True) }}"
}
</script>
{% endblock %}

{% block extra_css %}
{% endblock %}

{% block content %}
<article class="section blog-detail-section">
    <div class="container">
        <a href="{{ url_for('main.blog') }}" class="back-link reveal-up">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            Back to Blog
        </a>

        <header class="blog-detail-header reveal-up">
            <div class="blog-detail-meta">
                <span class="blog-detail-category">{{ post.category }}</span>
                <span class="blog-detail-date">{{ post.created_at.strftime('%B %d, %Y') }}</span>
                <span class="blog-detail-readtime">{{ post.read_time }} min read</span>
            </div>
            <h1 class="blog-detail-title">{{ post.title }}</h1>
            {% if post.excerpt %}
            <p class="blog-detail-excerpt">{{ post.excerpt }}</p>
            {% endif %}
            {% if post.tags %}
            <div class="blog-detail-tags">
                {% for tag in post.tags.split(',') %}
                <span class="blog-tag">{{ tag.strip() }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </header>

        {% if post.cover_image %}
        <div class="blog-detail-cover reveal-up">
            <img src="{{ post.cover_image }}" alt="{{ post.title }}">
        </div>
        {% endif %}

        <!-- Scroll progress bar -->
        <div class="scroll-progress" id="scrollProgress"></div>

        <div class="blog-detail-content reveal-up">
            {{ post.content|safe }}
        </div>

        <!-- Author card -->
        <div class="author-card reveal-up">
            <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Mohamed Maa Albared"
                class="author-photo">
            <div class="author-info">
                <h3>Mohamed Maa Albared</h3>
                <p>Data Scientist at zeroG (Lufthansa Group). Building intelligent systems at the intersection of
                    neuroscience, art, and artificial intelligence.</p>
            </div>
        </div>

        {% if related %}
        <div class="related-posts reveal-up">
            <h3 class="related-heading">Related Articles</h3>
            <div class="related-grid">
                {% for r in related %}
                <a href="{{ url_for('main.blog_detail', slug=r.slug) }}" class="related-card">
                    <span class="related-category">{{ r.category }}</span>
                    <h4>{{ r.title }}</h4>
                    <span class="related-date">{{ r.created_at.strftime('%b %d, %Y') }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</article>
{% endblock %}